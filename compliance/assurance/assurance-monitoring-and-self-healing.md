---
title: Microsoft 365 でのデータの監視と自己修復
description: この記事では、Microsoft 365 の監視機能と自己修復機能について説明します。
ms.author: robmazz
author: robmazz
manager: laurawi
ms.reviewer: sosstah
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
- MS-Compliance
f1.keywords:
- NOCSH
ms.custom:
- seo-marvel-apr2020
titleSuffix: Microsoft Service Assurance
hideEdit: true
ms.openlocfilehash: baf73746fff5e4866c36975e082c84017e0b3083
ms.sourcegitcommit: 024137a15ab23d26cac5ec14c36f3577fd8a0cc4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/01/2021
ms.locfileid: "51496942"
---
# <a name="data-monitoring-and-self-healing-in-microsoft-365"></a><span data-ttu-id="aefea-103">Microsoft 365 でのデータの監視と自己修復</span><span class="sxs-lookup"><span data-stu-id="aefea-103">Data monitoring and self-healing in Microsoft 365</span></span>

<span data-ttu-id="aefea-104">Microsoft 365 の規模を考えると、包括的な監視、インテリジェントなアラート、高速で信頼性の高い自己修復機能を備え、マルウェアから顧客データの回復力と安全を維持することは不可能です。</span><span class="sxs-lookup"><span data-stu-id="aefea-104">Given the scale of Microsoft 365, it would be impossible to keep customer data resilient and safe from malware without built-in monitoring that is comprehensive, alerting that is intelligent, and self-healing that is fast and reliable.</span></span> <span data-ttu-id="aefea-105">Microsoft 365 の規模で一連のサービスを監視する作業は非常に困難です。</span><span class="sxs-lookup"><span data-stu-id="aefea-105">Monitoring a set of services at the scale of Microsoft 365 is very challenging.</span></span> <span data-ttu-id="aefea-106">接続されたグローバル環境でサービスを運用および管理するには、新しいマインドセットと方法論を導入し、新しいテクノロジセットを作成する必要がありました。</span><span class="sxs-lookup"><span data-stu-id="aefea-106">New mindsets and methodologies needed to be introduced, and whole new sets of technology needed to be created to operate and manage the service in a connected global environment.</span></span> <span data-ttu-id="aefea-107">データ収集とフィルター処理の従来の監視アプローチから離れ、データ分析に基づくアプローチにアラートを作成しました。シグナルを取得し、そのデータに対する信頼性を高め、オートメーションを使用して問題を回復または解決します。</span><span class="sxs-lookup"><span data-stu-id="aefea-107">We have moved away from the traditional monitoring approach of data collection and filtering to create alerts to an approach that is based on data analysis; taking signals and building confidence in that data and then using automation to recover or resolve the issue.</span></span> <span data-ttu-id="aefea-108">このアプローチは、人間を回復方程式から取り出すのに役立ちます。これにより、操作のコストが低く、高速になり、エラーが発生しにくくなります。</span><span class="sxs-lookup"><span data-stu-id="aefea-108">This approach helps take humans out of the recovery equation, which in turn makes operations less expensive, faster, and less error prone.</span></span> 

<span data-ttu-id="aefea-109">Microsoft 365 監視の基本は、Azure、SQL Azure、およびオープン ソース ストリーミング データベース テクノロジに基SQL Data Insights Engine を構成するテクノロジのコレクション [です](https://cassandra.apache.org/)。</span><span class="sxs-lookup"><span data-stu-id="aefea-109">Fundamental to Microsoft 365 monitoring is a collection of technologies that comprise our Data Insights Engine, which is built on Azure, SQL Azure, and [open-source streaming database technology](https://cassandra.apache.org/).</span></span> <span data-ttu-id="aefea-110">データを収集して集計し、結論に達するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="aefea-110">It is designed to collect and aggregate data and reach conclusions.</span></span> <span data-ttu-id="aefea-111">現在、多くの地域の数十のデータセンターに分散している 100,000 台を超えるサーバー (1 日あたり約 15 TB) から 1 時間あたり 5 億以上のイベントを処理し、これらの数は増加しています。</span><span class="sxs-lookup"><span data-stu-id="aefea-111">Currently, it processes more than 500 million events per hour from more than 100,000 servers (~15 TB per day) scattered across dozens of datacenters in many regions, and these numbers are growing.</span></span> 

<span data-ttu-id="aefea-112">Microsoft 365 では、 *重要* なすべてをテストするために代理トランザクションを作成する外部監視を使用します。</span><span class="sxs-lookup"><span data-stu-id="aefea-112">Microsoft 365 uses *outside-in monitoring*, which involves creating synthetic transactions to test everything that is important.</span></span> <span data-ttu-id="aefea-113">たとえば、Exchange Online では、各シナリオで世界中のすべてのデータベースを 5 分ごとに分散してテストし、システム内のすべてのデータをほぼ継続的にカバーします。</span><span class="sxs-lookup"><span data-stu-id="aefea-113">For example, in Exchange Online each scenario is testing every database worldwide every five minutes in a scattered fashion, providing near continuous coverage of everything that lives in the system.</span></span> <span data-ttu-id="aefea-114">複数の場所から、1 日あたり 2 億 5,000 万回のテスト トランザクションが実行して、サービスの堅牢なベースラインまたはハートビートを作成します。</span><span class="sxs-lookup"><span data-stu-id="aefea-114">From multiple locations, 250 million test transactions per day are performed to create a robust baseline or heartbeat for the service.</span></span> 

<span data-ttu-id="aefea-115">また、Microsoft 365 では Red *Alert* という概念を使用しています。これは、データセンター内のすべてのコンピューターから人間が管理できる監視信号を縮小します。</span><span class="sxs-lookup"><span data-stu-id="aefea-115">Microsoft 365 also uses the concept of *Red Alert*, which shrinks down all the monitoring signals from all of the machines in our datacenters to something manageable by a human being.</span></span> <span data-ttu-id="aefea-116">概念は非常に簡単です。複数の信号で何かが起こっている場合は、何かが起こっている必要があります。</span><span class="sxs-lookup"><span data-stu-id="aefea-116">The concept is quite simple: If something is happening across multiple signals, there must be something going on.</span></span> <span data-ttu-id="aefea-117">1 つの信号に対する信頼度を高めるのではなく、精度を高めるには、各信号に対して妥当な忠実度を持つことです。</span><span class="sxs-lookup"><span data-stu-id="aefea-117">It is not about building confidence in one signal, it is about having reasonable fidelity for each signal so that you get greater accuracy.</span></span> <span data-ttu-id="aefea-118">この監視システムは非常に強力なので、24 時間 365 日のスタッフがモニターを監視する必要があります。問題が検出された場合に目を覚ますのは機械だけであり、その場合は適切なオンコール担当者をページに表示します。それ以上の場合は、問題を解決します。</span><span class="sxs-lookup"><span data-stu-id="aefea-118">This monitoring system is so powerful that we do not have 24x7 staff watching our monitors; all we have is the machinery that wakes up if it detects a problem, in which case it will page the appropriate on-call personnel, or more often as is the case, it will just go ahead and solve the problem.</span></span> <span data-ttu-id="aefea-119">信号の収集と赤いアラートの作成を開始すると、すべてのサービス パーティションで三角化を開始できます。</span><span class="sxs-lookup"><span data-stu-id="aefea-119">Once we start collecting signals and building red alerts off them, we can start triangulating across all our service partitions.</span></span> 

<span data-ttu-id="aefea-120">障害アラートと Red Alerts の組み合わせに基づいて、このアラートは、問題が発生している可能性のあるコンポーネントと、メールボックス サーバーを再起動してシステムが単独で問題を修正しようとしていることを正確に示します。</span><span class="sxs-lookup"><span data-stu-id="aefea-120">Based on the combination of the failure alert and the Red Alerts, this alert indicates exactly which components could be having a problem, and that the system is going to try to correct the problem by itself by restarting a mailbox server.</span></span> 

<span data-ttu-id="aefea-121">単一ページの復元などの自己修復機能に加えて、Exchange Online には、エンド ユーザー エクスペリエンスの維持に焦点を当てた監視と自己修復のアプローチを取るいくつかの機能が含まれています。</span><span class="sxs-lookup"><span data-stu-id="aefea-121">In addition to self-healing capabilities such as single page restore, Exchange Online includes several features that take an approach to monitoring and self-healing which focuses on preserving the end-user experience.</span></span> <span data-ttu-id="aefea-122">これらの機能には *、組み* 込みの監視および回復アクションを提供する管理可用性と、ディスク障害後にデータベースの冗長性を自動的に復元する AutoReseed が含まれます。</span><span class="sxs-lookup"><span data-stu-id="aefea-122">These features include *Managed Availability*, which provides built-in monitoring and recovery actions, and AutoReseed, which automatically restores database redundancy after a disk failure.</span></span> 

## <a name="managed-availability"></a><span data-ttu-id="aefea-123">可用性管理</span><span class="sxs-lookup"><span data-stu-id="aefea-123">Managed Availability</span></span> 

<span data-ttu-id="aefea-124">Managed availability は、回復指向のアクションを通じてエンド ユーザーのエクスペリエンスを監視および保護するネイティブの正常性チェックと回復ソリューションを提供します。</span><span class="sxs-lookup"><span data-stu-id="aefea-124">Managed availability provides a native health checking and recovery solution that monitors and protects the end user's experience through recovery-oriented actions.</span></span> <span data-ttu-id="aefea-125">管理可用性とは、組み込みの監視および回復アクションと Exchange 高可用性プラットフォームの統合です。</span><span class="sxs-lookup"><span data-stu-id="aefea-125">Managed availability is the integration of built-in monitoring and recovery actions with the Exchange high availability platform.</span></span> <span data-ttu-id="aefea-126">可用性管理は、問題が発生してシステムで発見されると、すぐにそれを検出して回復するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="aefea-126">It's designed to detect and recover from problems as soon as they occur and are discovered by the system.</span></span> <span data-ttu-id="aefea-127">Exchange での以前の外部監視向けソリューションやテクニックとは異なり、可用性管理は、問題の根本原因の識別や通知を試みません。</span><span class="sxs-lookup"><span data-stu-id="aefea-127">Unlike previous external monitoring solutions and techniques for Exchange, managed availability doesn't try to identify or communicate the root cause of an issue.</span></span> <span data-ttu-id="aefea-128">代わりに、エンド ユーザー エクスペリエンスの 3 つの重要な領域に対処する回復の側面に重点を置きます。</span><span class="sxs-lookup"><span data-stu-id="aefea-128">Instead, it's focused on recovery aspects that address three key areas of the end-user experience:</span></span>

- <span data-ttu-id="aefea-129">**可用性** - ユーザーはサービスにアクセスできますか?</span><span class="sxs-lookup"><span data-stu-id="aefea-129">**Availability** - Can users access the service?</span></span> 
- <span data-ttu-id="aefea-130">**待機時間** - ユーザーのエクスペリエンスについて</span><span class="sxs-lookup"><span data-stu-id="aefea-130">**Latency** - How is the experience for users?</span></span> 
- <span data-ttu-id="aefea-131">**エラー** - ユーザーは必要な処理を実行できますか?</span><span class="sxs-lookup"><span data-stu-id="aefea-131">**Errors** - Are users able to accomplish what they want?</span></span> 

<span data-ttu-id="aefea-132">可用性の管理は、Exchange Online を実行しているすべての Microsoft 365 サーバーで実行される内部機能です。</span><span class="sxs-lookup"><span data-stu-id="aefea-132">Managed availability is an internal feature that runs on every Microsoft 365 server running Exchange Online.</span></span> <span data-ttu-id="aefea-133">1 秒ごとに数百もの正常性メトリックをポーリングし、分析します。</span><span class="sxs-lookup"><span data-stu-id="aefea-133">It polls and analyzes hundreds of health metrics every second.</span></span> <span data-ttu-id="aefea-134">何かが間違っていると判明した場合、ほとんどの場合、自動的に修正されます。</span><span class="sxs-lookup"><span data-stu-id="aefea-134">If something is found to be wrong, most of the time it is fixed automatically.</span></span> <span data-ttu-id="aefea-135">ただし、マネージ可用性が独自に修正できない問題は常に発生します。</span><span class="sxs-lookup"><span data-stu-id="aefea-135">But there will always be issues that managed availability will not be able to fix on its own.</span></span> <span data-ttu-id="aefea-136">このような場合、マネージ可用性は、イベント ログによって問題を Microsoft 365 サポート チームにエスカレートします。</span><span class="sxs-lookup"><span data-stu-id="aefea-136">In those cases, managed availability will escalate the issue to a Microsoft 365 support team by means of event logging.</span></span>

## <a name="autoreseed"></a><span data-ttu-id="aefea-137">AutoReseed</span><span class="sxs-lookup"><span data-stu-id="aefea-137">AutoReseed</span></span>

<span data-ttu-id="aefea-138">Exchange Online サーバーは、複数のデータベースとそのログ ストリームを同じ RAID 以外のディスクに格納する構成に展開されます。</span><span class="sxs-lookup"><span data-stu-id="aefea-138">Exchange Online servers are deployed in a configuration that stores multiple databases and their log streams on the same non-RAID disk.</span></span> <span data-ttu-id="aefea-139">この構成は、ディスク上のデータの複製に RAID などの記憶域の冗長性メカニズムが使用されないので、多くの場合、単なるディスク (JBOD) と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="aefea-139">This configuration is often referred to as *just a bunch of disks* (JBOD) because no storage redundancy mechanisms, such as RAID, are being used to duplicate the data on the disk.</span></span> <span data-ttu-id="aefea-140">JBOD 環境でディスクに障害が発生すると、そのディスク上のデータは失われます。</span><span class="sxs-lookup"><span data-stu-id="aefea-140">When a disk fails in a JBOD environment, the data on that disk is lost.</span></span> 

<span data-ttu-id="aefea-141">Exchange Online のサイズと、その中に展開された数百万台のディスク ドライブを考えると、ディスク ドライブの障害は Exchange Online で定期的に発生します。</span><span class="sxs-lookup"><span data-stu-id="aefea-141">Given the size of Exchange Online and the fact that deployed within it are millions of disk drives, disk drive failures are a regular occurrence in Exchange Online.</span></span> <span data-ttu-id="aefea-142">実際、毎日 100 を超えるエラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="aefea-142">In fact, more than 100 fail every day.</span></span> <span data-ttu-id="aefea-143">オンプレミスのエンタープライズ展開でディスクに障害が発生した場合、管理者は障害が発生したディスクを手動で置き換え、影響を受けるデータを復元する必要があります。</span><span class="sxs-lookup"><span data-stu-id="aefea-143">When a disk fails in an on-premises enterprise deployment, an administrator must manually replace the failed disk and restore the affected data.</span></span> <span data-ttu-id="aefea-144">クラウド展開では、Microsoft 365 のサイズで、オペレーター (クラウド管理者) が手動でディスクを置き換えるのは実用的でも経済的にも実現可能ではありません。</span><span class="sxs-lookup"><span data-stu-id="aefea-144">In a cloud deployment the size of Microsoft 365, having operators (cloud administrators) manually replacing disks is neither practical nor economically feasible.</span></span> 

<span data-ttu-id="aefea-145">自動 Reseed、または *AutoReseed* は、ディスク障害、データベース破損イベント、またはデータベース コピーの再seedingを必要とするその他の問題に対応して、通常はオペレーターが実行するアクションの代わりの機能です。</span><span class="sxs-lookup"><span data-stu-id="aefea-145">Automatic Reseed, or *AutoReseed*, is a feature that is the replacement for what is normally operator-driven action in response to a disk failure, database corruption event, or other issue that necessitates a reseeding of a database copy.</span></span> <span data-ttu-id="aefea-146">AutoReseed は、ディスクの障害発生後にシステムでプロビジョニング済みの予備のディスクを使用して、自動的にデータベースの冗長性を復元するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="aefea-146">AutoReseed is designed to automatically restore database redundancy after a disk failure by using spare disks that have been provisioned on the system.</span></span> <span data-ttu-id="aefea-147">ディスクに障害が発生した場合、そのディスクに保存されているデータベース コピーは、サーバー上の事前構成済みの予備ディスクに自動的に再読み込みされ、冗長性が復元されます。</span><span class="sxs-lookup"><span data-stu-id="aefea-147">If a disk fails, the database copies stored on that disk are automatically reseeded to a preconfigured spare disk on the server, thereby restoring redundancy.</span></span> 